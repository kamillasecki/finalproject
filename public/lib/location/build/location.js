!function(){function n(n){this.$window=n,this.urlChangeInit=!1,this.urlChangeListeners=[]}function r(n){return null!=n&&"object"==typeof n}function t(n){return"undefined"==typeof n}function e(n){return"number"==typeof n}function i(n){return"boolean"==typeof n}function o(n){return"string"==typeof n}function u(n){this.browser=n}n.prototype={onUrlChange:function(n){var r=this.urlChangeListeners;if(!this.urlChangeInit){var t=this;this.$window.addEventListener("hashchange",function(n){t.fireUrlChange()}),this.urlChangeInit=!0}r.push(n)},fireUrlChange:function(){for(var n=this.urlChangeListeners,r=n.length-1;r>=0;r--)n[r](this.url())},url:function(n){var r=this.$window;if(!n){var t=r.location.hash;if("#"==t.charAt(0))return t.substring(1);if(0==t.length)return t;throw new Error("Invalid hash")}"/"!=n.charAt(0)&&(n="/"+n),r.location.hash=n}},u.SEP="?",u.prototype={path:function(n){var r=this.url().split(u.SEP);return n?(r[0]=n,this.url(r.join(u.SEP)),this):r[0]},search:function(n,e){var i=this.url().split(u.SEP);return t(n)?(i[1]=i[1]||"",f.parse(i[1])):(r(n)&&(i[1]=f.stringify(n),this.url(i.join(u.SEP))),this)},url:function(n){return n?void this.browser.url(n):this.browser.url()}};for(var s=new Array(256),h=0;256>h;++h)s[h]="%"+((16>h?"0":"")+h.toString(16)).toUpperCase();var a=function(n){return o(n)?n:e(n)&&isFinite(n)?""+n:i(n)?n?"true":"false":""},f={SEP:"&",EQ:"=",escape:function(n){n=""+n;var r,t,e=n.length,i="";if(0===e)return n;for(r=0;e>r;++r)t=n.charCodeAt(r),33===t||45===t||46===t||95===t||126===t||t>=39&&42>=t||t>=48&&57>=t||t>=65&&90>=t||t>=97&&122>=t?i+=n[r]:128>t?i+=s[t]:2048>t?i+=s[192|t>>6]+s[128|63&t]:55296>t||t>=57344?i+=s[224|t>>12]+s[128|t>>6&63]+s[128|63&t]:(++r,t=65536+((1023&t)<<10|1023&n.charCodeAt(r)),i+=s[240|t>>18]+s[128|t>>12&63]+s[128|t>>6&63]+s[128|63&t]);return i},parse:function(n,r,t){if(r=r||f.SEP,t=t||f.EQ,o(n)){var e,i,u,s=n.split(r).filter(function(n){return n.length>0}).map(function(n){return n.split(t)}),h={};for(e=s.length-1;e>=0;e--)i=s[e][0],u=s[e][1],h[i]=u;return h}},stringify:function(n,r,t,e){r=r||f.SEP,t=t||f.EQ;var i=f.escape;if(e&&"function"==typeof e.encodeURIComponent&&(i=e.encodeURIComponent),null!==n&&"object"==typeof n){for(var o=Object.keys(n),u=o.length,s=u-1,h="",l=0;u>l;++l){var c=o[l],p=n[c],g=i(a(c))+t;if(Array.isArray(p)){for(var v=p.length,w=v-1,y=0;v>y;++y)h+=g+i(a(p[y])),w>y&&(h+=r);v&&s>l&&(h+=r)}else h+=g+i(a(p)),s>l&&(h+=r)}return h}return""}};window.$location={Location:u,Browser:n}}();